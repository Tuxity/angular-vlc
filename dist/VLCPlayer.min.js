/*! VLCPlayer 2014-11-10 09:11:06 */
angular.module("kdarcel.vlc-player",[]).filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;b>c;c++)a.push(c);return a}}).filter("time2String",function(){return function a(a){if(!a)return"";var b=parseInt(a/1e3%60),c=parseInt(a/6e4%60),d=parseInt(a/36e5%24),e="";return d&&(e+=(10>hour?"0"+d:d)+":"),e+=(10>c?"0"+c:c)+":",e+=10>b?"0"+b:b}}).factory("poollingFactory",function(a){function b(d,e){var f=a(d,1e3*c);return f.then(function(){b(d,e)})}var c=1;return{callFnOnInterval:b}}).directive("vlcplayer",function(a){return{restrict:"E",replace:!0,templateUrl:"VLCPlayer.tpl.html",link:function(b,c,d){var e=function(a){if(a.url&&a.filename&&(b.vlc=document.getElementById("vlc"),b.vlc)){b.vlc.playlist.items.count>0&&b.vlc.playlist.items.clear();var c=[":vout-filter=deinterlace",":deinterlace-mode=linear"],d=b.vlc.playlist.add(a.url,a.filename,c);for("true"==a.autoplay&&b.vlc.playlist.playItem(d);0==b.vlc.input.hasVout;);b.videoDuration=b.vlc.input.length}};b.$watch(function(){return{url:d.vlcUrl,filename:d.vlcFilename,autoplay:d.vlcAutoplay}},e,!0),b.vlcTogglePause=function(){b.vlc.playlist.togglePause()},b.vlcToggleMute=function(){b.vlc.audio.toggleMute()},b.vlcSwitchAudioTrack=function(a){b.vlc.audio.track=a},b.vlcSwitchSubtitleTrack=function(a){b.vlc.subtitle.track=a},b.vlcToggleFullscreen=function(){b.vlc.video.toggleFullscreen()},a.callFnOnInterval(function(){b.videoCurrentTime=b.vlc.input.time})}}}),angular.module("kdarcel.vlc-player.tpl",["VLCPlayer.tpl.html"]),angular.module("VLCPlayer.tpl.html",[]).run(["$templateCache",function(a){a.put("VLCPlayer.tpl.html",'<div>\n    <div class="video-container">\n        <div class="video">\n            <object classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" events="true" width="100%" height="100%">\n                <embed pluginspage="http://www.videolan.org"\n                       type="application/x-vlc-plugin"\n                       version="VideoLAN.VLCPlugin.2"\n                       width="100%"\n                       height="100%"\n                       toolbar="false"\n                       branding="true"\n                       id="vlc"\n                ></embed>\n            </object>\n        </div>\n        <div class="video-controls">\n            <div class="toolbar">\n                <button type="button" class="btn btn-default pull-left" ng-click="vlcTogglePause()">\n                    <span class="glyphicon" ng-class="vlc.playlist.isPlaying ? \'glyphicon-pause\' : \'glyphicon-play\'"></span>\n                </button>\n                <span>{{ videoCurrentTime | time2String }} / {{ videoDuration | time2String }}</span>\n                <div class="form-inline pull-right">\n                    <button type="button" class="btn btn-default" ng-click="vlcToggleMute()">\n                        <span class="glyphicon" ng-class="vlc.audio.mute ? \'glyphicon-volume-off\' : \'glyphicon-volume-up\'"></span>\n                    </button>\n                    <div class="btn-group">\n                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                            <span class="glyphicon glyphicon-sound-5-1"></span>\n                        </button>\n                        <ul class="dropdown-menu" role="menu">\n                            <li ng-repeat="n in [] | range:vlc.audio.count">\n                                <a href="" ng-click="vlcSwitchAudioTrack(n)">\n                                    {{ vlc.audio.description(n) }}&nbsp;<span class="glyphicon glyphicon-ok" ng-show="vlc.audio.track == n"></span>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="btn-group">\n                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n                            <span class="glyphicon glyphicon-subtitles"></span>\n                        </button>\n                        <ul class="dropdown-menu" role="menu">\n                            <li ng-repeat="n in [] | range:vlc.subtitle.count">\n                                <a href="" ng-click="vlcSwitchSubtitleTrack(n)">\n                                    {{ vlc.subtitle.description(n) }}&nbsp;<span class="glyphicon glyphicon-ok" ng-show="vlc.subtitle.track == n"></span>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    <button type="button" class="btn btn-default" ng-click="vlcToggleFullscreen()">\n                        <span class="glyphicon glyphicon-resize-full"></span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')}]);